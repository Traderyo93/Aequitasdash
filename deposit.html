
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deposit - Aequitas Capital Partners</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Geist:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Light Theme */
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-tertiary: #64748b;
            --border-color: #e2e8f0;
            --sidebar-bg: #1e293b;
            --sidebar-text: #94a3b8;
            --sidebar-text-active: #ffffff;
            --sidebar-hover: rgba(59, 130, 246, 0.1);
            --sidebar-active: rgba(59, 130, 246, 0.2);
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
        }

        [data-theme="dark"] {
            /* Dark Theme */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-tertiary: #94a3b8;
            --border-color: #334155;
            --sidebar-bg: #0f172a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Geist', 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        /* Icons */
        .icon {
            width: 20px;
            height: 20px;
            display: inline-block;
            background: currentColor;
            mask-size: contain;
            mask-repeat: no-repeat;
            mask-position: center;
        }

        .icon-dashboard {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2'/%3E%3C/svg%3E");
        }

        .icon-document {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z'/%3E%3C/svg%3E");
        }

        .icon-money {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z'/%3E%3C/svg%3E");
        }

        .icon-bank {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4'/%3E%3C/svg%3E");
        }

        .icon-user {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z'/%3E%3C/svg%3E");
        }

        .icon-chat {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z'/%3E%3C/svg%3E");
        }

        .icon-moon {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z'/%3E%3C/svg%3E");
        }

        .icon-sun {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z'/%3E%3C/svg%3E");
        }

        .icon-logout {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1'/%3E%3C/svg%3E");
        }

        .icon-download {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4'/%3E%3C/svg%3E");
        }

        .icon-upload {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12'/%3E%3C/svg%3E");
        }

        .icon-check {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 13l4 4L19 7'/%3E%3C/svg%3E");
        }

        .icon-clock {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z'/%3E%3C/svg%3E");
        }

        .icon-copy {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z'/%3E%3C/svg%3E");
        }
        /* Sidebar Styles */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            z-index: 1000;
        }

        .sidebar-header {
            padding: 24px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            max-width: 140px;
            height: auto;
            filter: brightness(1.1);
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--sidebar-text);
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .theme-toggle:hover {
            background: var(--sidebar-hover);
            color: var(--sidebar-text-active);
        }

        .sidebar-nav {
            flex: 1;
            padding: 20px 0;
            overflow-y: auto;
        }

        .nav-section {
            margin-bottom: 24px;
        }

        .nav-section-title {
            color: var(--accent);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin: 0 20px 12px 20px;
            padding-bottom: 4px;
            border-bottom: 1px solid rgba(59, 130, 246, 0.3);
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            color: var(--sidebar-text);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
        }

        .nav-item:hover {
            background: var(--sidebar-hover);
            color: var(--sidebar-text-active);
        }

        .nav-item.active {
            background: var(--sidebar-active);
            color: var(--accent);
            border-right: 3px solid var(--accent);
        }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .user-details h4 {
            color: var(--sidebar-text-active);
            font-size: 14px;
            font-weight: 600;
        }

        .user-details p {
            color: var(--sidebar-text);
            font-size: 12px;
        }

        .logout-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: var(--sidebar-text);
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s ease;
            width: 100%;
        }

        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
            color: #fca5a5;
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            min-height: 100vh;
        }

        .top-bar {
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-color);
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .top-user-info {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
        }

        .deposit-content {
            padding: 24px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Cards */
        .card {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .card-icon {
            width: 24px;
            height: 24px;
            color: var(--accent);
        }

        /* Form Styles */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .currency-input {
            position: relative;
        }

        .currency-input::before {
            content: '$';
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-weight: 500;
            z-index: 1;
        }

        .currency-input input {
            padding-left: 32px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-hover);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--border-color);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-outline {
            background: transparent;
            color: var(--accent);
            border: 1px solid var(--accent);
        }

        .btn-outline:hover {
            background: var(--accent);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        /* Bank Details */
        .bank-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .bank-detail-item {
            padding: 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }

        .bank-detail-label {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .bank-detail-value {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            word-break: break-all;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .copy-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .copy-btn:hover {
            color: var(--accent);
            background: var(--bg-tertiary);
        }

        /* File Upload */
        .file-upload {
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .file-upload:hover {
            border-color: var(--accent);
            background: rgba(59, 130, 246, 0.02);
        }

        .file-upload-icon {
            width: 48px;
            height: 48px;
            color: var(--text-secondary);
            margin: 0 auto 16px;
        }

        .file-upload-text {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 8px;
        }

        .file-upload-subtext {
            color: var(--text-tertiary);
            font-size: 12px;
        }

        .file-input {
            display: none;
        }

        .uploaded-files {
            margin-top: 16px;
        }

        .uploaded-file {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .file-name {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .file-size {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .remove-file {
            background: none;
            border: none;
            color: var(--error);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            font-size: 12px;
        }

        /* Timeline */
        .timeline {
            position: relative;
            margin-left: 24px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border-color);
        }

        .timeline-item {
            position: relative;
            padding-left: 32px;
            margin-bottom: 24px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 4px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 3px solid var(--bg-primary);
            z-index: 1;
        }

        .timeline-item.completed::before {
            background: var(--success);
        }

        .timeline-item.pending::before {
            background: var(--warning);
        }

        .timeline-item.processing::before {
            background: var(--accent);
        }

        .timeline-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
        }

        .timeline-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .timeline-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .timeline-date {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .timeline-description {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .timeline-actions {
            display: flex;
            gap: 8px;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-rejected {
    background: rgba(239, 68, 68, 0.1);
    color: var(--error);
}

.icon-x {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 18L18 6M6 6l12 12'/%3E%3C/svg%3E");
}

        .status-completed {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .status-pending {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .status-processing {
            background: rgba(59, 130, 246, 0.1);
            color: var(--accent);
        }

        /* Steps */
        .steps {
            display: flex;
            align-items: center;
            margin-bottom: 32px;
            padding: 0 24px;
        }

        .step {
            display: flex;
            align-items: center;
            flex: 1;
            position: relative;
        }

.step:not(:last-child)::after {
    content: '';
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    width: 40px;
    height: 2px;
    background: var(--border-color);
    z-index: 0;
}


        .step.completed:not(:last-child)::after {
            background: var(--success);
        }

        .step-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            border: 2px solid var(--border-color);
            background: var(--bg-primary);
            color: var(--text-secondary);
            z-index: 1;
            margin-right: 12px;
        }

        .step.completed .step-circle {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .step.active .step-circle {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        .step-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .step.completed .step-label,
        .step.active .step-label {
            color: var(--text-primary);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .steps {
                flex-direction: column;
                gap: 16px;
            }

            .step {
                flex-direction: column;
                text-align: center;
            }

            .step:not(:last-child)::after {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .deposit-content {
                padding: 16px;
            }

            .bank-details-grid {
                grid-template-columns: 1fr;
            }

            .timeline {
                margin-left: 12px;
            }

            .timeline-item {
                padding-left: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo-container">
                <img src="https://i.ibb.co/8DfYwWdG/Aequitas-White-Logo.png" alt="Aequitas Capital Partners" class="logo">
            </div>
            <button class="theme-toggle" onclick="toggleTheme()">
                <span class="icon icon-moon"></span>
            </button>
        </div>

        <nav class="sidebar-nav">
            <div class="nav-section">
                <div class="nav-section-title">Account</div>
                <button class="nav-item" onclick="navigateTo('dashboard')">
                    <span class="icon icon-dashboard"></span>
                    <span>Overview</span>
                </button>
                <button class="nav-item" onclick="navigateTo('statements')">
                    <span class="icon icon-document"></span>
                    <span>Statements</span>
                </button>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Trading</div>
                <button class="nav-item active" onclick="navigateTo('deposit')">
                    <span class="icon icon-money"></span>
                    <span>Deposit</span>
                </button>
                <button class="nav-item" onclick="navigateTo('withdraw')">
                    <span class="icon icon-bank"></span>
                    <span>Withdraw</span>
                </button>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Settings</div>
                <button class="nav-item" onclick="navigateTo('profile')">
                    <span class="icon icon-user"></span>
                    <span>Profile</span>
                </button>
                <button class="nav-item" onclick="navigateTo('support')">
                    <span class="icon icon-chat"></span>
                    <span>Support</span>
                </button>
            </div>

            <!-- Admin Section -->
            <div class="nav-section" id="adminSection" style="display: none;">
                <div class="nav-section-title">Admin</div>
                <button class="nav-item" onclick="navigateTo('admin')">
                    <span class="icon icon-user"></span>
                    <span>Client Management</span>
                </button>
            </div>
        </nav>

        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">A</div>
                <div class="user-details">
                    <h4 id="userName">Admin User</h4>
                    <p id="userEmail">admin@aequitascap.com</p>
                </div>
            </div>
            <button class="logout-btn" onclick="logout()">
                <span class="icon icon-logout"></span>
                <span>Logout</span>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="top-bar">
            <h1 class="page-title">Deposit Funds</h1>
            <div class="top-user-info">
                <span>Welcome back,</span>
                <span id="topUserName">Admin</span>
            </div>
        </div>

        <div class="deposit-content">
            <!-- Progress Steps -->
            <div class="steps">
                <div class="step" id="step1">
                    <div class="step-circle">1</div>
                    <div class="step-label">Enter Amount</div>
                </div>
                <div class="step" id="step2">
                    <div class="step-circle">2</div>
                    <div class="step-label">Download Forms</div>
                </div>
                <div class="step" id="step3">
                    <div class="step-circle">3</div>
                    <div class="step-label">Submit Documents</div>
                </div>
                <div class="step" id="step4">
                    <div class="step-circle">4</div>
                    <div class="step-label">Transfer Funds</div>
                </div>
            </div>

            <div class="form-grid">
                <!-- Deposit Amount Form -->
                <div class="card">
                    <div class="card-header">
                        <span class="icon icon-money card-icon"></span>
                        <h2 class="card-title">Deposit Amount</h2>
                    </div>

                    <form id="depositForm">
                        <div class="form-group">
                            <label class="form-label" for="depositAmount">Amount to Deposit</label>
                            <div class="currency-input">
                                <input type="number" id="depositAmount" class="form-input" placeholder="0.00" min="1000" step="0.01" required>
                            </div>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">
                                Minimum deposit: $1,000
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="depositPurpose">Purpose of Deposit</label>
                            <select id="depositPurpose" class="form-input" required>
                                <option value="">Select purpose</option>
                                <option value="initial">Initial Investment</option>
                                <option value="additional">Additional Capital</option>
                                <option value="reinvestment">Profit Reinvestment</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary">
                            <span class="icon icon-check"></span>
                            Confirm Deposit Amount
                        </button>
                    </form>
                </div>

                <!-- Required Forms -->
                <div class="card">
                    <div class="card-header">
                        <span class="icon icon-document card-icon"></span>
                        <h2 class="card-title">Required Forms</h2>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 16px;">
                            Please download, complete, and submit the following forms:
                        </p>

                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px; background: var(--bg-secondary); border-radius: 8px;">
                                <div>
                                    <div style="font-weight: 500; font-size: 14px;">Source of Funds Declaration</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">Required for all deposits</div>
                                </div>
                                <button type="button" class="btn btn-outline" id="downloadSourceBtn" onclick="downloadSourceOfFundsForm()" disabled>
                                    <span class="icon icon-download"></span>
                                    Download
                                </button>
                            </div>

                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px; background: var(--bg-secondary); border-radius: 8px;">
                                <div>
                                    <div style="font-weight: 500; font-size: 14px;">Deposit Request Form</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">Internal processing form</div>
                                </div>
                                <button type="button" class="btn btn-outline" id="downloadDepositBtn" onclick="downloadDepositForm()" disabled>
                                    <span class="icon icon-download"></span>
                                    Download
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="file-upload" onclick="document.getElementById('formsUpload').click()">
                        <div class="icon icon-upload file-upload-icon"></div>
                        <div class="file-upload-text">Upload completed forms</div>
                        <div class="file-upload-subtext">PDF files only, max 10MB each</div>
                        <input type="file" id="formsUpload" class="file-input" multiple accept=".pdf" onchange="handleFileUpload(event, 'forms')">
                    </div>

                    <div class="uploaded-files" id="uploadedForms"></div>
                </div>
            </div>
            <!-- Bank Details -->
            <div class="card">
                <div class="card-header">
                    <span class="icon icon-bank card-icon"></span>
                    <h2 class="card-title">Bank Transfer Details</h2>
                </div>

                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    Use the following bank details to transfer your deposit. Please ensure you include your account identification number in the payment reference.
                </p>

                <div class="bank-details-grid">
                    <div class="bank-detail-item">
                        <div class="bank-detail-label">Recipient</div>
                        <div class="bank-detail-value">
                            Bilderlings Pay Limited
                            <button class="copy-btn" onclick="copyToClipboard('Bilderlings Pay Limited')">
                                <span class="icon icon-copy"></span>
                            </button>
                        </div>
                    </div>

                    <div class="bank-detail-item">
                        <div class="bank-detail-label">Registration Number</div>
                        <div class="bank-detail-value">
                            09908958
                            <button class="copy-btn" onclick="copyToClipboard('09908958')">
                                <span class="icon icon-copy"></span>
                            </button>
                        </div>
                    </div>

                    <div class="bank-detail-item">
                        <div class="bank-detail-label">Address</div>
                        <div class="bank-detail-value">
                            13 Regent Street, London, SW1Y 4LR
                            <button class="copy-btn" onclick="copyToClipboard('13 Regent Street, London, SW1Y 4LR')">
                                <span class="icon icon-copy"></span>
                            </button>
                        </div>
                    </div>

                    <div class="bank-detail-item">
                        <div class="bank-detail-label">Country</div>
                        <div class="bank-detail-value">United Kingdom</div>
                    </div>

                    <div class="bank-detail-item">
                        <div class="bank-detail-label">Bank Name</div>
                        <div class="bank-detail-value">
                            iFAST Global Bank Limited
                            <button class="copy-btn" onclick="copyToClipboard('iFAST Global Bank Limited')">
                                <span class="icon icon-copy"></span>
                            </button>
                        </div>
                    </div>

                    <div class="bank-detail-item">
                        <div class="bank-detail-label">Account Number</div>
                        <div class="bank-detail-value">
                            00 0407 89
                            <button class="copy-btn" onclick="copyToClipboard('00 0407 89')">
                                <span class="icon icon-copy"></span>
                            </button>
                        </div>
                    </div>

                    <div class="bank-detail-item">
                        <div class="bank-detail-label">IBAN</div>
                        <div class="bank-detail-value">
                            GB83 EZYR 0436 3000 0407 89
                            <button class="copy-btn" onclick="copyToClipboard('GB83 EZYR 0436 3000 0407 89')">
                                <span class="icon icon-copy"></span>
                            </button>
                        </div>
                    </div>

                    <div class="bank-detail-item">
                        <div class="bank-detail-label">Sort Code</div>
                        <div class="bank-detail-value">
                            04 36 30
                            <button class="copy-btn" onclick="copyToClipboard('04 36 30')">
                                <span class="icon icon-copy"></span>
                            </button>
                        </div>
                    </div>

                    <div class="bank-detail-item">
                        <div class="bank-detail-label">SWIFT Code</div>
                        <div class="bank-detail-value">
                            EZYRGB3L
                            <button class="copy-btn" onclick="copyToClipboard('EZYRGB3L')">
                                <span class="icon icon-copy"></span>
                            </button>
                        </div>
                    </div>

                    <div class="bank-detail-item">
                        <div class="bank-detail-label">Bank Address</div>
                        <div class="bank-detail-value">
                            Sierra Quebec Bravo 77 Marsh Wall London, E14 9SH, UK
                            <button class="copy-btn" onclick="copyToClipboard('Sierra Quebec Bravo 77 Marsh Wall London, E14 9SH, UK')">
                                <span class="icon icon-copy"></span>
                            </button>
                        </div>
                    </div>

                    <div class="bank-detail-item">
                        <div class="bank-detail-label">Bank Country</div>
                        <div class="bank-detail-value">United Kingdom</div>
                    </div>

                    <div class="bank-detail-item">
                        <div class="bank-detail-label">Payment Reference</div>
                        <div class="bank-detail-value">
                            <span id="accountReference">KC5230</span>
                            <button class="copy-btn" onclick="copyToClipboard(document.getElementById('accountReference').textContent)">
                                <span class="icon icon-copy"></span>
                            </button>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 8px; padding: 16px; margin-top: 20px;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                        <span class="icon icon-clock" style="color: var(--warning);"></span>
                        <strong style="color: var(--warning);">Important</strong>
                    </div>
                    <p style="font-size: 14px; color: var(--text-secondary);">
    <strong>CRITICAL:</strong> You MUST include the payment reference KC5230 in your bank transfer. 
    Failure to include this reference will result in delays or rejection of your deposit. 
    This reference is essential for proper allocation of your funds to your account.
</p>
                </div>
            </div>

            <!-- Deposit History -->
            <div class="card">
                <div class="card-header">
                    <span class="icon icon-clock card-icon"></span>
                    <h2 class="card-title">Deposit History & Status</h2>
                </div>

                <div class="timeline" id="depositTimeline">
                    <!-- Timeline items will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>
    <!-- Complete Working JavaScript -->
    <script>
        let currentTheme = 'light';
        let uploadedFiles = {
            forms: []
        };
        let currentDeposit = null;
        let depositHistory = [];

        // Load existing data on page load
      function loadExistingData() {
    const savedDeposits = localStorage.getItem('aequitas_deposits');
    if (savedDeposits) {
        depositHistory = JSON.parse(savedDeposits);
    }
    
    const savedFiles = localStorage.getItem('aequitas_uploaded_files');
    if (savedFiles) {
        uploadedFiles = JSON.parse(savedFiles);
        
        // Clean up files for deposits that are no longer pending
        if (uploadedFiles.forms) {
            uploadedFiles.forms = uploadedFiles.forms.filter(file => {
                const deposit = depositHistory.find(d => d.id === file.depositId);
                // Keep file only if deposit is still pending
                return deposit && deposit.status === 'pending';
            });
            
            // Save cleaned up files
            localStorage.setItem('aequitas_uploaded_files', JSON.stringify(uploadedFiles));
        }
        
        renderUploadedFiles('forms');
    }

    const savedProgress = localStorage.getItem('aequitas_deposit_progress');
    if (savedProgress) {
        updateProgressSteps(parseInt(savedProgress));
    }

    updateDepositTimeline();
}

        // Add this new function in deposit.html
function cleanupProcessedFiles() {
    const uploadedFiles = JSON.parse(localStorage.getItem('aequitas_uploaded_files') || '{}');
    
    if (uploadedFiles.forms) {
        const originalCount = uploadedFiles.forms.length;
        
        // Remove files for deposits that are no longer pending
        uploadedFiles.forms = uploadedFiles.forms.filter(file => {
            const deposit = depositHistory.find(d => d.id === file.depositId);
            return deposit && deposit.status === 'pending';
        });
        
        if (uploadedFiles.forms.length !== originalCount) {
            localStorage.setItem('aequitas_uploaded_files', JSON.stringify(uploadedFiles));
            renderUploadedFiles('forms');
            
            const removedCount = originalCount - uploadedFiles.forms.length;
            if (removedCount > 0) {
                showNotification(`${removedCount} processed file(s) removed from upload area.`, 'info');
            }
        }
    }
}
        
        // Theme Toggle
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            
            const themeToggle = document.querySelector('.theme-toggle .icon');
            themeToggle.className = currentTheme === 'light' ? 'icon icon-moon' : 'icon icon-sun';
            
            localStorage.setItem('aequitas_theme', currentTheme);
        }

        // Navigation
        function navigateTo(page) {
            console.log(`Navigation to: ${page}`);
            
            if (page === 'dashboard') {
                window.location.href = 'dashboard.html';
            } else if (page === 'admin') {
                window.location.href = 'admin.html';
            } else if (page !== 'deposit') {
                alert(`${page.charAt(0).toUpperCase() + page.slice(1)} page coming soon!`);
            }
        }

        // Logout
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('aequitas_auth_token');
                localStorage.removeItem('aequitas_user_data');
                window.location.href = 'login.html';
            }
        }

        // Copy to clipboard with visual feedback
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                const button = event.target.closest('.copy-btn');
                const originalHTML = button.innerHTML;
                button.innerHTML = '<span class="icon icon-check"></span>';
                button.style.color = 'var(--success)';
                
                setTimeout(() => {
                    button.innerHTML = originalHTML;
                    button.style.color = '';
                }, 1000);

                showNotification('Copied to clipboard!', 'success');
            }).catch(() => {
                showNotification('Failed to copy', 'error');
            });
        }

        // Track form downloads
        function trackFormDownload(formType, amount) {
            const downloads = JSON.parse(localStorage.getItem('aequitas_form_downloads') || '[]');
            downloads.push({
                type: formType,
                amount: amount,
                timestamp: new Date().toISOString(),
                depositId: currentDeposit?.id
            });
            localStorage.setItem('aequitas_form_downloads', JSON.stringify(downloads));
        }

        // REAL File Upload with tracking and validation
async function handleFileUpload(event, type) {
    const files = Array.from(event.target.files);
    const userData = JSON.parse(localStorage.getItem('aequitas_user_data') || '{}');
    
    if (!currentDeposit) {
        showNotification('Please submit deposit request first before uploading files.', 'warning');
        event.target.value = '';
        return;
    }
    
    for (const file of files) {
        // Validate file type and size
        if (file.type !== 'application/pdf') {
            showNotification(`${file.name} is not a PDF file. Only PDF files are allowed.`, 'error');
            continue;
        }
        
        if (file.size > 10 * 1024 * 1024) { // 10MB limit
            showNotification(`${file.name} is too large. Maximum file size is 10MB.`, 'error');
            continue;
        }
        
        try {
            showNotification('Uploading file...', 'info');
            
            // Convert file to base64 for upload
            const fileData = await new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = (e) => resolve(e.target.result);
                reader.readAsDataURL(file);
            });
            
            // Upload to backend
            const response = await fetch('/api/upload', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    fileName: file.name,
                    fileData: fileData,
                    depositId: currentDeposit.id,
                    userId: userData.id || 'demo'
                })
            });
            
            const result = await response.json();
            
            if (result.success) {
                // Add to local storage for UI
                const fileObj = {
                    id: result.file.id,
                    name: file.name,
                    size: formatFileSize(file.size),
                    uploadDate: new Date().toISOString(),
                    depositId: currentDeposit.id,
                    url: result.file.url, // Real download URL!
                    status: 'uploaded'
                };
                
                uploadedFiles[type].push(fileObj);
                localStorage.setItem('aequitas_uploaded_files', JSON.stringify(uploadedFiles));
                
                showNotification(`${file.name} uploaded successfully!`, 'success');
                
                // Update progress if forms are uploaded
                if (type === 'forms' && uploadedFiles.forms.length > 0) {
                    updateProgressSteps(3);
                    localStorage.setItem('aequitas_deposit_progress', '3');
                }
            } else {
                throw new Error(result.error || 'Upload failed');
            }
            
        } catch (error) {
            console.error('Upload error:', error);
            showNotification(`Upload failed: ${error.message}`, 'error');
        }
    }
    
    renderUploadedFiles(type);
    event.target.value = ''; // Clear the input for next upload
}

        // Render uploaded files with enhanced display
        function renderUploadedFiles(type) {
            const container = document.getElementById(`uploaded${type.charAt(0).toUpperCase() + type.slice(1)}`);
            
            if (uploadedFiles[type].length === 0) {
                container.innerHTML = '';
                return;
            }
            
            container.innerHTML = uploadedFiles[type].map((file, index) => `
                <div class="uploaded-file">
                    <div class="file-info">
                        <span class="icon icon-document"></span>
                        <div>
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${file.size}  Uploaded ${new Date(file.uploadDate).toLocaleDateString()}</div>
                            <div style="font-size: 11px; color: var(--success); margin-top: 2px;">
                                <span class="icon icon-check" style="width: 12px; height: 12px;"></span>
                                Successfully uploaded
                            </div>
                        </div>
                    </div>
                    <button class="remove-file" onclick="removeFile('${type}', ${index})">Remove</button>
                </div>
            `).join('');
        }

        // Remove uploaded file
        function removeFile(type, index) {
            if (confirm('Are you sure you want to remove this file?')) {
                uploadedFiles[type].splice(index, 1);
                localStorage.setItem('aequitas_uploaded_files', JSON.stringify(uploadedFiles));
                renderUploadedFiles(type);
                showNotification('File removed successfully.', 'success');
                
                // Update progress if no forms left
                if (type === 'forms' && uploadedFiles.forms.length === 0) {
                    updateProgressSteps(2);
                    localStorage.setItem('aequitas_deposit_progress', '2');
                }
            }
        }

        // Format file size
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        function updateProgressSteps(activeStep) {
            const steps = document.querySelectorAll('.step');
            
            steps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                
                if (index < activeStep - 1) {
                    step.classList.add('completed');
                    step.querySelector('.step-circle').innerHTML = '<span class="icon icon-check"></span>';
                } else if (index === activeStep - 1) {
                    step.classList.add('active');
                } else {
                    step.querySelector('.step-circle').textContent = index + 1;
                }
            });
        }

        document.getElementById('depositForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const amount = document.getElementById('depositAmount').value;
            const purpose = document.getElementById('depositPurpose').value;
            
            if (!amount || !purpose) {
                showNotification('Please fill in all required fields.', 'error');
                return;
            }
            
            if (parseFloat(amount) < 1000) {
                showNotification('Minimum deposit amount is $1,000.', 'error');
                return;
            }
            
            // Generate reference number
            const reference = 'ACP' + Date.now().toString().slice(-6);
            
            
            // Create deposit object
            currentDeposit = {
                id: 'dep_' + Date.now(),
                amount: parseFloat(amount),
                purpose: purpose,
                reference: reference,
                status: 'pending',
                createdAt: new Date().toISOString(),
                userId: JSON.parse(localStorage.getItem('aequitas_user_data') || '{}').id || 'demo'
            };
            
            // Add to deposit history
            depositHistory.push(currentDeposit);
            localStorage.setItem('aequitas_deposits', JSON.stringify(depositHistory));
            
            // Update progress steps - STEP 1 COMPLETED, STEP 2 ACTIVE
            updateProgressSteps(2);
            localStorage.setItem('aequitas_deposit_progress', '2');
            
            // Update timeline
            updateDepositTimeline();
            
            // Enable download buttons
            document.getElementById('downloadSourceBtn').disabled = false;
            document.getElementById('downloadDepositBtn').disabled = false;
            
            showNotification(`Deposit request for $${parseFloat(amount).toLocaleString()} submitted successfully! Your reference is: ${reference}`, 'success');
        });

function downloadDepositForm() {
    if (!currentDeposit) {
        showNotification('Please submit deposit request first to generate your reference number.', 'warning');
        return;
    }
    
    const link = document.createElement('a');
    link.href = 'forms/deposit-request-form.pdf';
    link.download = 'deposit-request-form.pdf';
    link.style.display = 'none';
    document.body.appendChild(link);
    
    // Handle download failure
    link.onerror = function() {
        showNotification('Error downloading file. Please contact support.', 'error');
    };
    
    link.click();
    document.body.removeChild(link);
    
    showNotification('Deposit Request Form downloaded! CRITICAL: Include KC5230 in your bank transfer reference.', 'success');
    
    // Track download
    trackFormDownload('deposit_request', currentDeposit.amount);
}

        function downloadSourceOfFundsForm() {
    const depositAmount = document.getElementById('depositAmount').value;
    const depositPurpose = document.getElementById('depositPurpose').value;
    
    if (!depositAmount || !depositPurpose) {
        showNotification('Please enter deposit amount and purpose first.', 'warning');
        return;
    }
    
    // Try different path formats
    const link = document.createElement('a');
    link.href = 'forms/source-of-funds-declaration.pdf';
    link.download = 'source-of-funds-declaration.pdf';
    link.style.display = 'none';
    document.body.appendChild(link);
    
    // Handle download failure
    link.onerror = function() {
        showNotification('Error downloading file. Please contact support.', 'error');
    };
    
    link.click();
    document.body.removeChild(link);
    
    showNotification('Source of Funds Declaration downloaded! Please complete and upload.', 'success');
    
    // Track download
    trackFormDownload('source_of_funds', depositAmount);
}

function downloadDepositForm() {
    if (!currentDeposit) {
        showNotification('Please submit deposit request first to generate your reference number.', 'warning');
        return;
    }
    
    // Download the actual PDF from forms folder
    const link = document.createElement('a');
    link.href = './forms/deposit-request-form.pdf';
    link.download = 'deposit-request-form.pdf';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    
    showNotification('Deposit Request Form downloaded! Complete with your reference: ' + currentDeposit.reference, 'success');
    
    // Track download
    trackFormDownload('deposit_request', currentDeposit.amount);
}

        function updateDepositTimeline() {
    const timeline = document.getElementById('depositTimeline');
    
    // Only show real user deposits - no demo data
    const allDeposits = depositHistory.map(d => ({
        id: d.id,
        title: `Deposit Request - ${d.reference}`,
        description: `$${d.amount.toLocaleString()} deposit for ${d.purpose} - ${getStatusDescription(d.status)}`,
        date: new Date(d.createdAt).toLocaleDateString(),
        status: d.status,
        amount: d.amount,
        showDownload: d.status === 'completed'
    }));
    
    if (allDeposits.length === 0) {
        timeline.innerHTML = `
            <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                <div style="font-size: 18px; margin-bottom: 8px;">No deposits yet</div>
                <div style="font-size: 14px;">Your deposit history will appear here once you submit a request.</div>
            </div>
        `;
        return;
    }
    
    timeline.innerHTML = allDeposits.map(deposit => `
        <div class="timeline-item ${deposit.status}">
            <div class="timeline-content">
                <div class="timeline-header">
                    <div class="timeline-title">${deposit.title}</div>
                    <div class="timeline-date">${deposit.date}</div>
                </div>
                <div class="timeline-description">
                    ${deposit.description}
                </div>
                <div class="timeline-actions">
                    <span class="status-badge status-${deposit.status}">
                        <span class="icon icon-${getStatusIcon(deposit.status)}"></span>
                        ${deposit.status.charAt(0).toUpperCase() + deposit.status.slice(1)}
                    </span>
                    ${deposit.showDownload ? `
                        <button class="btn btn-secondary" onclick="downloadDocument('${deposit.id}')">
                            <span class="icon icon-download"></span>
                            Download Receipt
                        </button>
                    ` : ''}
                </div>
            </div>
        </div>
    `).join('');
    
    // Clean up processed files at the end
    cleanupProcessedFiles();
}

        // Helper functions for timeline
        function getStatusDescription(status) {
            switch(status) {
                case 'pending': return 'Awaiting document review and approval';
                case 'approved': return 'Approved - proceed with bank transfer';
                case 'completed': return 'Funds received and allocated';
                case 'rejected': return 'Please contact support for details';
                default: return 'Status unknown';
            }
        }

       function getStatusIcon(status) {
    switch(status) {
        case 'completed': return 'check';
        case 'approved': return 'check';
        case 'pending': return 'clock';
        case 'rejected': return 'x';
        default: return 'clock';
    }
}

        // Download document functionality
        function downloadDocument(docId) {
            showNotification(`Document ${docId} download initiated.`, 'success');
            
            const userData = JSON.parse(localStorage.getItem('aequitas_user_data') || '{}');
            const fileName = `Receipt_${docId}_${userData.firstName || 'Client'}.pdf`;
            
            const receiptContent = `AEQUITAS CAPITAL PARTNERS
DEPOSIT RECEIPT

Document ID: ${docId}
Client: ${userData.firstName || ''} ${userData.lastName || ''}
Date: ${new Date().toLocaleDateString()}

This serves as confirmation of your deposit transaction.
Please retain this receipt for your records.

For questions, contact: support@aequitascap.com`;

            const blob = new Blob([receiptContent], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = fileName;
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
        }
        // Enhanced notification system
        function showNotification(message, type = 'info') {
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(n => n.remove());

            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 16px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 10001;
                max-width: 400px;
                word-wrap: break-word;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                animation: slideInRight 0.3s ease-out;
                ${type === 'success' ? 'background: linear-gradient(135deg, #10b981, #059669);' : ''}
                ${type === 'error' ? 'background: linear-gradient(135deg, #ef4444, #dc2626);' : ''}
                ${type === 'warning' ? 'background: linear-gradient(135deg, #f59e0b, #d97706);' : ''}
                ${type === 'info' ? 'background: linear-gradient(135deg, #3b82f6, #2563eb);' : ''}
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: flex-start; gap: 8px;">
                    <span class="icon icon-${type === 'success' ? 'check' : 'clock'}" style="margin-top: 2px;"></span>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.animation = 'slideOutRight 0.3s ease-in';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 5000);
        }

        // Add CSS for notification animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Check authentication
            const authToken = localStorage.getItem('aequitas_auth_token');
            if (!authToken) {
                showNotification('Please log in to access this page.', 'warning');
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 2000);
                return;
            }

            // Load saved theme
            const savedTheme = localStorage.getItem('aequitas_theme') || 'light';
            if (savedTheme === 'dark') {
                currentTheme = 'dark';
                document.documentElement.setAttribute('data-theme', 'dark');
                const themeToggle = document.querySelector('.theme-toggle .icon');
                if (themeToggle) themeToggle.className = 'icon icon-sun';
            }

            // Load user data and update UI
            const userData = JSON.parse(localStorage.getItem('aequitas_user_data') || '{}');
            const firstName = userData.firstName || 'User';
            const lastName = userData.lastName || '';
            const email = userData.email || '';
            
            // Update user info elements
            const userNameEl = document.getElementById('userName');
            const userEmailEl = document.getElementById('userEmail');
            const topUserNameEl = document.getElementById('topUserName');
            const userAvatarEl = document.getElementById('userAvatar');
            
            if (userNameEl) userNameEl.textContent = `${firstName} ${lastName}`;
            if (userEmailEl) userEmailEl.textContent = email;
            if (topUserNameEl) topUserNameEl.textContent = firstName;
            if (userAvatarEl) userAvatarEl.textContent = firstName.charAt(0).toUpperCase();

            // Show admin section if user is admin
            if (userData.role === 'admin') {
                const adminSection = document.getElementById('adminSection');
                if (adminSection) adminSection.style.display = 'block';
            }

            // Load existing data
            loadExistingData();
            
            // Initially disable download buttons until deposit is submitted
            const downloadSourceBtn = document.getElementById('downloadSourceBtn');
            const downloadDepositBtn = document.getElementById('downloadDepositBtn');
            
            if (!currentDeposit) {
                if (downloadSourceBtn) downloadSourceBtn.disabled = true;
                if (downloadDepositBtn) downloadDepositBtn.disabled = true;
            }

            console.log('Deposit page initialized successfully');
        });

        // Auto-save form data as user types
        document.getElementById('depositAmount').addEventListener('input', function() {
            localStorage.setItem('aequitas_temp_amount', this.value);
        });

        document.getElementById('depositPurpose').addEventListener('change', function() {
            localStorage.setItem('aequitas_temp_purpose', this.value);
        });

        // Restore form data on page load
        function restoreFormData() {
            const tempAmount = localStorage.getItem('aequitas_temp_amount');
            const tempPurpose = localStorage.getItem('aequitas_temp_purpose');
            
            if (tempAmount) {
                document.getElementById('depositAmount').value = tempAmount;
            }
            if (tempPurpose) {
                document.getElementById('depositPurpose').value = tempPurpose;
            }
        }

        // Load temp data when page loads
        setTimeout(restoreFormData, 100);

    </script>
</body>
</html>
